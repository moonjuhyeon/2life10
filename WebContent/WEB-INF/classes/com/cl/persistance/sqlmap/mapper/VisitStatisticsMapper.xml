<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cl.persistance.mapper.VisitStatisticsMapper">
	<insert id="insertVisitInfo" parameterType="java.util.Map">
	INSERT INTO VISIT_STATISTICS
		(
		 VISITID, 
		 SEQ, 
		 URL, 
		 UTYPE, 
		 REG_DT
		 ) 
		 VALUES
		 (
		 #{visitID},
		 IFNULL((SELECT MAX(TMP.SEQ) FROM VISIT_STATISTICS TMP WHERE TMP.VISITID = #{visitID}), 0) + 1,
		 #{URL},
		 #{uType},
		 NOW()
		 )
	</insert>
</mapper>